"key":{
    "Type" : "AWS::KMS::Key",
    "Properties" : {
        "Description" : "Encryption key",
        "Enabled" : true,
        "EnableKeyRotation" : false,
        "KeyPolicy" : {
            "Version": "2012-10-17",
            "Statement": [{
                "Effect": "Allow",
                "Principal": {"AWS":[
                    {"Fn::GetAtt":["LambdaEncrypt","Arn"]} 
                ]},
                "Action": [
                    "kms:Encrypt",
                ],
                "Resource": "*"
            },
            {
                "Sid": "Enable IAM User Permissions",
                "Effect": "Allow",
                "Principal": {"AWS": 
                    {"Fn::Join":["",[
                        "arn:aws:iam::",
                        {"Ref":"AWS::AccountId"},
                        ":root"
                    ]]}
                },
                "Action": "kms:*",
                "Resource": "*"
            },
            {
                "Sid": "Enable IAM User Permissions",
                "Effect": "Deny",
                "Principal": {"AWS": 
                    {"Fn::Join":["",[
                        "arn:aws:iam::",
                        {"Ref":"AWS::AccountId"},
                        ":root"
                    ]]}
                },
                "Action": "kms:Decrypt",
                "Resource": "*"
            }
            ]
        }
    }
}



