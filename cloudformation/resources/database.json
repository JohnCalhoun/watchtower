/*
*/
"DB" : {
    "Type" : "AWS::RDS::DBInstance",
    "Properties" : {
        "AllocatedStorage" : "5",
        "DBInstanceClass" : "db.t2.micro",
        "Engine" : "MySQL",
        "MultiAZ":{"Fn::If" : [
            "CreateProdResources",
            "true",
            "false"
            ]
        },
        "DBSnapshotIdentifier":{"Fn::If" : [
            "CreateFromBackup",
            {"Ref":"SnapshotIdentifier"},
            {"Ref":"AWS::NoValue"}
            ]
        },
        "MasterUsername" :      { "Ref" : "DBUser" },
        "MasterUserPassword" :  { "Ref" : "DBPassword" },
        "DBName":               { "Ref" : "DBName" },
        "VPCSecurityGroups":[{"Ref":"DBSG"}],
        "DBSubnetGroupName":{"Ref":"DBsubnet"},
        "PubliclyAccessible":"false"
    }
},
"DBsubnet":{
    "Type" : "AWS::RDS::DBSubnetGroup",
    "Properties" : {
        "DBSubnetGroupDescription" : "DB subnet",
        "SubnetIds" : [ {"Ref":"subnet1"},{"Ref":"subnet2"}]
    }
},
"DBtables":{
    "Type": "Custom::GraphDatabase",
    "Properties":{
        "ServiceToken": { "Fn::GetAtt" : ["InitDataBase", "Arn"] },
        "dbname":{ "Ref" : "DBName" }, 
        "dbuser":{ "Ref" : "DBUser" },
        "dbpassword":{ "Ref" : "DBPassword" },
        "dbendpoint":{ "Fn::GetAtt" : ["DB", "Endpoint.Address"] }
    },
    "DependsOn":"DB"
}
