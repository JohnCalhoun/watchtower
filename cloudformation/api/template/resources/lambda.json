"CreateCognitoPool":{
      "Type" : "AWS::Lambda::Function",
      "Properties" : {
        "Code" : {
            "S3Bucket":{"Ref":"ArtifactsBucket"},
            "S3Key":"disclosure/lambda/lambda-createcognitopool.zip"
        },
        "FunctionName":{"Fn::Join":["-",[
                "CreateCognitoPool", 
                {"Ref":"AWS::StackName"}
            ]]},
        "Handler" : "handler.handler",
        "MemorySize" : "128",
        "Role" : {"Fn::GetAtt":["CreateCognitoPoolRole","Arn"]},
        "Runtime" : "nodejs4.3",
        "Timeout" : "100"
      }
},
"CreateCognitoIdentity":{
      "Type" : "AWS::Lambda::Function",
      "Properties" : {
        "Code" : {
            "S3Bucket":{"Ref":"ArtifactsBucket"},
            "S3Key":"disclosure/lambda/lambda-createcognitoidentity.zip"
        },
        "FunctionName":{"Fn::Join":["-",[
                "CreateCognitoIdentity", 
                {"Ref":"AWS::StackName"}
            ]]},
        "Handler" : "handler.handler",
        "MemorySize" : "128",
        "Role" : {"Fn::GetAtt":["CreateCognitoIdentityRole","Arn"]},
        "Runtime" : "nodejs4.3",
        "Timeout" : "100"
      }
},
"RDSProxyReadyOnly":{
      "Type" : "AWS::Lambda::Function",
      "Properties" : {
        "Code" : {
            "S3Bucket":{"Ref":"ArtifactsBucket"},
            "S3Key":"disclosure/lambda/lambda-rdsproxy.zip"
        },
        "FunctionName":{"Fn::Join":["-",[
                "RDSProxyReadyOnly", 
                {"Ref":"AWS::StackName"}
            ]]},
        "Handler" : "handler.handler",
        "MemorySize" : "128",
        "Role" : {"Fn::GetAtt":["RDSProxyRole","Arn"]},
        "Runtime" : "nodejs4.3",
        "Timeout" : "100",
        "VpcConfig":{
            "SecurityGroupIds":[
                {"Ref":"RDSlambdaSG"} 
            ],
            "SubnetIds":[
                {"Fn::ImportValue":{"Fn::Sub":"${NetworkStackName}-subnet1"}},
                {"Fn::ImportValue":{"Fn::Sub":"${NetworkStackName}-subnet2"}}
            ]
        },
        "Environment":{
            "Variables":{
                "DBNAME":{ "Ref" : "DBName" }, 
                "DBUSER":{ "Ref" : "DBUserRead" },
                "DBPASSWORD":{ "Ref" : "DBPasswordRead" },
                "DBENDPOINT":{"Fn::ImportValue":{"Fn::Sub":"${DatabaseStackName}-DBEndpoint"}}
            }
        }
      }
},
"RDSProxyWrite":{
      "Type" : "AWS::Lambda::Function",
      "Properties" : {
        "Code" : {
            "S3Bucket":{"Ref":"ArtifactsBucket"},
            "S3Key":"disclosure/lambda/lambda-rdsproxy.zip"
        },
        "FunctionName":{"Fn::Join":["-",[
                "RDSProxyWrite", 
                {"Ref":"AWS::StackName"}
            ]]},
        "Handler" : "handler.handler",
        "MemorySize" : "128",
        "Role" : {"Fn::GetAtt":["RDSProxyRole","Arn"]},
        "Runtime" : "nodejs4.3",
        "Timeout" : "100",
        "VpcConfig":{
            "SecurityGroupIds":[
                {"Ref":"RDSlambdaSG"} 
            ],
            "SubnetIds":[
                {"Fn::ImportValue":{"Fn::Sub":"${NetworkStackName}-subnet1"}},
                {"Fn::ImportValue":{"Fn::Sub":"${NetworkStackName}-subnet2"}}
            ]
        },
        "Environment":{
            "Variables":{
                "DBNAME":{ "Ref" : "DBName" }, 
                "DBUSER":{ "Ref" : "DBUserWrite" },
                "DBPASSWORD":{ "Ref" : "DBPasswordWrite" },
                "DBENDPOINT":{"Fn::ImportValue":{"Fn::Sub":"${DatabaseStackName}-DBEndpoint"}}
            }
        }
    }
}
