function run(a,b,c){user=process.env.DBUSER,password=process.env.DBPASSWORD,endpoint=process.env.DBENDPOINT,database=process.env.DBNAME,script=fs.readFileSync(source_dir+"/scripts/"+a+".sql").toString();var d=mysql.createConnection({host:endpoint,user:user,password:password,database:database});d.connect(),d.config.queryFormat=function(a,b){return b?a.replace(/\:(\w+)/g,function(a,c){return b.hasOwnProperty(c)?this.escape(b[c]):a}.bind(this)):a},d.query(script,{database:database},function(a,d){a&&c(a),b()}),d.end()}var sql=require("mysql"),fs=require("fs");module.exports.create=function(a){var b=new Promise(function(b,c){"Create"===a.RequestType|"Update"===a.RequestType?run("create",b,c):b()});return b},module.exports.destory=function(a){var b=new Promise(function(b,c){"Delete"===a.RequestType|"Update"===a.RequestType?run("destory",b,c):b()});return b};