var https=require("https"),url=require("url");module.exports=function(a,b){function c(c){var d=url.parse(a.ResponseURL),e={hostname:d.hostname,port:443,path:d.path,method:"PUT",headers:{"content-type":"","content-length":c.length}},f=https.request(e,function(a){console.log("STATUS: "+a.statusCode),console.log("HEADERS: "+JSON.stringify(a.headers)),b.succeed()});f.on("error",function(a){console.log("sendResponse Error:"+a),b.fail(a)}),console.log(c),f.write(c),f.end()}this.succeed=function(b){if(console.log("data",b),b){var d=JSON.stringify({Status:"SUCCESS",PhysicalResourceId:b,StackId:a.StackId,RequestId:a.RequestId,LogicalResourceId:a.LogicalResourceId,Data:{Domain:b.ID}});c(d)}else{var d=JSON.stringify({Status:"SUCCESS",PhysicalResourceId:"empty",StackId:a.StackId,RequestId:a.RequestId,LogicalResourceId:a.LogicalResourceId});c(d)}},this.fail=function(b){console.log(b);var d=JSON.stringify({Status:"FAILED",Reason:"Error: "+b.toString(),PhysicalResourceId:"empty",StackId:a.StackId,RequestId:a.RequestId,LogicalResourceId:a.LogicalResourceId});c(d)}};